!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("tslib").__importDefault(require("react"));class o extends t.default.Component{constructor(t){super(t),this.state={delayMs:t.delayMs||0,src:t.src,timeout:null,render:t.render||null,id:t.id||null,renderScript:t.renderScript||!1,updated:!1},this.componentDidMount=this.componentDidMount.bind(this),this.componentWillUnmount=this.componentWillUnmount.bind(this),this._appendScript=this._appendScript.bind(this),this.render=this.render.bind(this),this.onCreate=this.onCreate.bind(this),this.onLoad=this.onLoad.bind(this),this.onError=this.onError.bind(this),this.onSuccess=this.onSuccess.bind(this)}componentDidMount(){this.log("componentDidMount started","color: #ff0000; font-weight: bold;",2),this.setState({timeout:setTimeout(this._appendScript,this.state.delayMs)}),this.log("componentDidMount exiting","color: #ff0000; font-weight: bold;",2)}log(t,o,e){if(this.props.debug){const s=e?" ".repeat(e):"";console.log(`%c ScriptLoader debug {src: "${this.state.src}"}`,o||"color: #00ff00; font-weight: bold;"),console.log(`%c ${s} ${t}`,o||"color: #00ff00; font-weight: bold;")}}componentDidUpdate(){this.log("componentDidUpdate started","color: #ff0000; font-weight: bold;",2),0==this.state.updated&&(this.setState({updated:!0}),this.onSuccess()),this.log("componentDidUpdate exiting","color: #ff0000; font-weight: bold;",2)}componentWillUnmount(){this.log("componentWillUnmount started","color: #ff0000; font-weight: bold;",2),this.state.timeout&&(this.log("Clearing Timeout...","color: #ff0000; font-weight: medium;",4),clearTimeout(this.state.timeout)),this.log("componentWillUnmount exiting","color: #ff0000; font-weight: bold;",2)}_appendScript=()=>{this.log("_appendScript started","color: #ff0000; font-weight: bold;",2);const{delayMs:t,src:o,id:e}=this.state,s=document.createElement("script");s.src=o,this.state.id&&(s.id=this.state.id);const i=Object.keys(this.state),n=Object.keys(this.props).filter((t=>!i.includes(t)));if(s.setAttribute("data-delayMs",t.toString()),0<n.length)for(const[t,o]of Object.entries(this.props))i.includes(t)||s.setAttribute(t,o);s.onload=this.onLoad,s.onerror=this.onError,document.body.appendChild(s),this.onCreate(),this.log("_appendScript exiting","color: #ff0000; font-weight: bold;",2)};onError(t){const{onError:o}=this.props;this.log(`onerror started... for { src: "${this.state.src}" }`,"color: #ff0000; font-weight: bold;",2),o&&o(t),this.log(`onerror exiting... for { src: "${this.state.src}" }`,"color: #ff0000; font-weight: bold;",2)}onSuccess(){const{onSuccess:t}=this.props;this.log(`onsuccess started... for { src: "${this.state.src}" }`,"color: #ff0000; font-weight: bold;",2),t&&t(),this.log(`onsuccess exiting... for { src: "${this.state.src}" }`,"color: #ff0000; font-weight: bold;",2)}onLoad(t){const o=this.props.onLoad;this.log(`onload started... for { src: "${this.state.src}" }`,"color: #ff0000; font-weight: bold;",2),t&&this.log(`onload event: ${JSON.stringify(t,null,2)}`,"color: #ff0000; font-weight: bold;",4),o&&o(t),this.log(`onload exiting... for { src: "${this.state.src}" }`,"color: #ff0000; font-weight: bold;",2)}onCreate(t){const{onLoad:o}=this.props;this.log(`oncreate started... for { src: "${this.state.src}" }`,"color: #ff0000; font-weight: bold;",2),t&&this.log(`oncreate event: ${JSON.stringify(t,null,2)}`,"color: #ff0000; font-weight: bold;",4),o&&o(t),this.log(`oncreate exiting... for { src: "${this.state.src}" }`,"color: #ff0000; font-weight: bold;",2)}render(){const{updated:t,render:o}=this.state;return this.log(`render called, { src: ${this.state.src}}`,"color: #ff0000; font-weight: bold;",2),t&&o?o:null}}exports.default=o}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVhY3Qtc2NyaXB0LXRhZy51bWQuanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9zcmMvU2NyaXB0VGFnL2luZGV4LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5cbi8qKiBAY2xhc3MgU2NyaXB0TG9hZGVyXG4gKiBAZGVzY3JpcHRpb24gVGhpcyBhIHJlYWN0IGNvbXBvbmVudCBpcyBpbnRlbmRlZCB0byBiZSBhIGRyb3AtaW4gcmVwbGFjZW1lbnQgZm9yIHRoZSA8c2NyaXB0PiBodG1sIG5hdGl2ZSB0YWcuIEFmdGVyIHlvdSBhZGQgaXQgaW4gYW55IGxvY2F0aW9uIG9mIHlvdXIgcmVhY3QtYXBwLCB0aGUgY29tcG9uZW50IHdpbGwgdGFrZSBjYXJlIG9uIGFwcGVuZGluZywgdGhlIGNvcnJlc3BvbmRpbmcgc2NyaXB0IHRhZyB0byB5b3VyIGFwcCdzIGRvY3VtZW50LiBJdCBzdXBwb3J0cyBhbGwgdGhlIG5hdGl2ZSBhdHRyaWJ1dGVzIGFzIHdlbGwuXG4gKiBAZXhhbXBsZSBgYGA8U2NyaXB0TG9hZGVyIHNyYz1cImh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vcmVjYXB0Y2hhL2FwaS5qc1wiIC8+YGBgXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjcmlwdFRhZyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxcbiAgICBTY3JpcHRMb2FkZXJQcm9wcyxcbiAgICB7XG4gICAgICAgIGRlbGF5TXM6IG51bWJlcjtcbiAgICAgICAgc3JjOiBzdHJpbmc7XG4gICAgICAgIHRpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbDtcbiAgICAgICAgcmVuZGVyOiBKU1guRWxlbWVudCB8IG51bGw7XG4gICAgICAgIGlkOiBzdHJpbmcgfCBudWxsO1xuICAgICAgICByZW5kZXJTY3JpcHQ6IGJvb2xlYW47XG4gICAgICAgIHVwZGF0ZWQ6IGJvb2xlYW47XG4gICAgfVxuPiB7XG4gICAgY29uc3RydWN0b3IocHJvcHM6IFNjcmlwdExvYWRlclByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgZGVsYXlNczogcHJvcHMuZGVsYXlNcyB8fCAwLFxuICAgICAgICAgICAgc3JjOiBwcm9wcy5zcmMsXG4gICAgICAgICAgICB0aW1lb3V0OiBudWxsLFxuICAgICAgICAgICAgcmVuZGVyOiBwcm9wcy5yZW5kZXIgfHwgbnVsbCxcbiAgICAgICAgICAgIGlkOiBwcm9wcy5pZCB8fCBudWxsLFxuICAgICAgICAgICAgcmVuZGVyU2NyaXB0OiBwcm9wcy5yZW5kZXJTY3JpcHQgfHwgZmFsc2UsXG4gICAgICAgICAgICB1cGRhdGVkOiBmYWxzZSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNvbXBvbmVudERpZE1vdW50ID0gdGhpcy5jb21wb25lbnREaWRNb3VudC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gdGhpcy5jb21wb25lbnRXaWxsVW5tb3VudC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9hcHBlbmRTY3JpcHQgPSB0aGlzLl9hcHBlbmRTY3JpcHQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZW5kZXIgPSB0aGlzLnJlbmRlci5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMub25DcmVhdGUgPSB0aGlzLm9uQ3JlYXRlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25Mb2FkID0gdGhpcy5vbkxvYWQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbkVycm9yID0gdGhpcy5vbkVycm9yLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25TdWNjZXNzID0gdGhpcy5vblN1Y2Nlc3MuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy5sb2coXG4gICAgICAgICAgICBcImNvbXBvbmVudERpZE1vdW50IHN0YXJ0ZWRcIixcbiAgICAgICAgICAgIFwiY29sb3I6ICNmZjAwMDA7IGZvbnQtd2VpZ2h0OiBib2xkO1wiLFxuICAgICAgICAgICAgMlxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgdGltZW91dDogc2V0VGltZW91dCh0aGlzLl9hcHBlbmRTY3JpcHQsIHRoaXMuc3RhdGUuZGVsYXlNcyksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubG9nKFxuICAgICAgICAgICAgXCJjb21wb25lbnREaWRNb3VudCBleGl0aW5nXCIsXG4gICAgICAgICAgICBcImNvbG9yOiAjZmYwMDAwOyBmb250LXdlaWdodDogYm9sZDtcIixcbiAgICAgICAgICAgIDJcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBsb2cobXNnOiBzdHJpbmcsIHN0eWxlPzogc3RyaW5nLCBpbmRlbnQ/OiBudW1iZXIpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuZGVidWcpIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGVudFN0ciA9IGluZGVudCA/IFwiIFwiLnJlcGVhdChpbmRlbnQpIDogXCJcIjtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgIGAlYyBTY3JpcHRMb2FkZXIgZGVidWcge3NyYzogXCIke3RoaXMuc3RhdGUuc3JjfVwifWAsXG4gICAgICAgICAgICAgICAgc3R5bGUgfHwgYGNvbG9yOiAjMDBmZjAwOyBmb250LXdlaWdodDogYm9sZDtgXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgJWMgJHtpbmRlbnRTdHJ9ICR7bXNnfWAsXG4gICAgICAgICAgICAgICAgc3R5bGUgfHwgYGNvbG9yOiAjMDBmZjAwOyBmb250LXdlaWdodDogYm9sZDtgXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICAgIFwiY29tcG9uZW50RGlkVXBkYXRlIHN0YXJ0ZWRcIixcbiAgICAgICAgICAgIFwiY29sb3I6ICNmZjAwMDA7IGZvbnQtd2VpZ2h0OiBib2xkO1wiLFxuICAgICAgICAgICAgMlxuICAgICAgICApO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS51cGRhdGVkID09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICB1cGRhdGVkOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9uU3VjY2VzcygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9nKFxuICAgICAgICAgICAgXCJjb21wb25lbnREaWRVcGRhdGUgZXhpdGluZ1wiLFxuICAgICAgICAgICAgXCJjb2xvcjogI2ZmMDAwMDsgZm9udC13ZWlnaHQ6IGJvbGQ7XCIsXG4gICAgICAgICAgICAyXG4gICAgICAgICk7XG4gICAgfVxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICAgIFwiY29tcG9uZW50V2lsbFVubW91bnQgc3RhcnRlZFwiLFxuICAgICAgICAgICAgXCJjb2xvcjogI2ZmMDAwMDsgZm9udC13ZWlnaHQ6IGJvbGQ7XCIsXG4gICAgICAgICAgICAyXG4gICAgICAgICk7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRoaXMubG9nKFxuICAgICAgICAgICAgICAgIFwiQ2xlYXJpbmcgVGltZW91dC4uLlwiLFxuICAgICAgICAgICAgICAgIFwiY29sb3I6ICNmZjAwMDA7IGZvbnQtd2VpZ2h0OiBtZWRpdW07XCIsXG4gICAgICAgICAgICAgICAgNFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnN0YXRlLnRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9nKFxuICAgICAgICAgICAgXCJjb21wb25lbnRXaWxsVW5tb3VudCBleGl0aW5nXCIsXG4gICAgICAgICAgICBcImNvbG9yOiAjZmYwMDAwOyBmb250LXdlaWdodDogYm9sZDtcIixcbiAgICAgICAgICAgIDJcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBfYXBwZW5kU2NyaXB0ID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICAgIFwiX2FwcGVuZFNjcmlwdCBzdGFydGVkXCIsXG4gICAgICAgICAgICBcImNvbG9yOiAjZmYwMDAwOyBmb250LXdlaWdodDogYm9sZDtcIixcbiAgICAgICAgICAgIDJcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCB7IGRlbGF5TXMsIHNyYywgaWQgfSA9IHRoaXMuc3RhdGU7XG5cbiAgICAgICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgc2NyaXB0LnNyYyA9IHNyYztcbiAgICAgXG5cbiAgICAgICAgaWYodGhpcy5zdGF0ZS5pZCkge1xuICAgICAgICAgICAgc2NyaXB0LmlkID0gdGhpcy5zdGF0ZS5pZDtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgY29uc3Qgc2NyaXB0UHJvcEtleXMgPSBPYmplY3Qua2V5cyh0aGlzLnN0YXRlKTtcbiAgICAgICAgY29uc3Qgb3RoZXJQcm9wc0tleXMgPSBPYmplY3Qua2V5cyh0aGlzLnByb3BzKS5maWx0ZXIoXG4gICAgICAgICAgICAocHJvcCkgPT4gIXNjcmlwdFByb3BLZXlzLmluY2x1ZGVzKHByb3ApXG4gICAgICAgICk7XG4gICAgICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWRlbGF5TXNcIiwgZGVsYXlNcy50b1N0cmluZygpKTtcblxuICAgICAgICAvLyBBZGQgY3VzdG9tIGF0dHJpYnV0ZXNcbiAgICAgICAgaWYgKG90aGVyUHJvcHNLZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2F0dHIsIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnByb3BzKSkge1xuICAgICAgICAgICAgICAgIGlmIChzY3JpcHRQcm9wS2V5cy5pbmNsdWRlcyhhdHRyKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSBhcyBhbnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IHRoaXMub25Mb2FkO1xuICAgICAgICBzY3JpcHQub25lcnJvciA9IHRoaXMub25FcnJvcjtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuXG4gICAgICAgIHRoaXMub25DcmVhdGUoKTtcblxuICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICAgIFwiX2FwcGVuZFNjcmlwdCBleGl0aW5nXCIsXG4gICAgICAgICAgICBcImNvbG9yOiAjZmYwMDAwOyBmb250LXdlaWdodDogYm9sZDtcIixcbiAgICAgICAgICAgIDJcbiAgICAgICAgKTtcbiAgICB9O1xuXG4gICAgb25FcnJvcihlPzogRXJyb3IgfCBFdmVudCB8IHN0cmluZykge1xuICAgICAgICBjb25zdCB7IG9uRXJyb3IgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIHRoaXMubG9nKFxuICAgICAgICAgICAgYG9uZXJyb3Igc3RhcnRlZC4uLiBmb3IgeyBzcmM6IFwiJHt0aGlzLnN0YXRlLnNyY31cIiB9YCxcbiAgICAgICAgICAgIFwiY29sb3I6ICNmZjAwMDA7IGZvbnQtd2VpZ2h0OiBib2xkO1wiLFxuICAgICAgICAgICAgMlxuICAgICAgICApO1xuICAgICAgICBpZiAob25FcnJvcikge1xuICAgICAgICAgICAgb25FcnJvcihlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICAgIGBvbmVycm9yIGV4aXRpbmcuLi4gZm9yIHsgc3JjOiBcIiR7dGhpcy5zdGF0ZS5zcmN9XCIgfWAsXG4gICAgICAgICAgICBcImNvbG9yOiAjZmYwMDAwOyBmb250LXdlaWdodDogYm9sZDtcIixcbiAgICAgICAgICAgIDJcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBvblN1Y2Nlc3MoZT86IEVycm9yIHwgRXZlbnQgfCBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgeyBvblN1Y2Nlc3MgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIHRoaXMubG9nKFxuICAgICAgICAgICAgYG9uc3VjY2VzcyBzdGFydGVkLi4uIGZvciB7IHNyYzogXCIke3RoaXMuc3RhdGUuc3JjfVwiIH1gLFxuICAgICAgICAgICAgXCJjb2xvcjogI2ZmMDAwMDsgZm9udC13ZWlnaHQ6IGJvbGQ7XCIsXG4gICAgICAgICAgICAyXG4gICAgICAgICk7XG4gICAgICAgIGlmIChvblN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIG9uU3VjY2VzcygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9nKFxuICAgICAgICAgICAgYG9uc3VjY2VzcyBleGl0aW5nLi4uIGZvciB7IHNyYzogXCIke3RoaXMuc3RhdGUuc3JjfVwiIH1gLFxuICAgICAgICAgICAgXCJjb2xvcjogI2ZmMDAwMDsgZm9udC13ZWlnaHQ6IGJvbGQ7XCIsXG4gICAgICAgICAgICAyXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgb25Mb2FkKGU/OiBFdmVudCB8IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBjdXN0b21PbkxvYWQgPSB0aGlzLnByb3BzLm9uTG9hZCBhcyAoZT86IEV2ZW50KSA9PiB2b2lkO1xuICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICAgIGBvbmxvYWQgc3RhcnRlZC4uLiBmb3IgeyBzcmM6IFwiJHt0aGlzLnN0YXRlLnNyY31cIiB9YCxcbiAgICAgICAgICAgIFwiY29sb3I6ICNmZjAwMDA7IGZvbnQtd2VpZ2h0OiBib2xkO1wiLFxuICAgICAgICAgICAgMlxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICAgICAgICBgb25sb2FkIGV2ZW50OiAke0pTT04uc3RyaW5naWZ5KGUsIG51bGwsIDIpfWAsXG4gICAgICAgICAgICAgICAgXCJjb2xvcjogI2ZmMDAwMDsgZm9udC13ZWlnaHQ6IGJvbGQ7XCIsXG4gICAgICAgICAgICAgICAgNFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VzdG9tT25Mb2FkKSB7XG4gICAgICAgICAgICBjdXN0b21PbkxvYWQoZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2coXG4gICAgICAgICAgICBgb25sb2FkIGV4aXRpbmcuLi4gZm9yIHsgc3JjOiBcIiR7dGhpcy5zdGF0ZS5zcmN9XCIgfWAsXG4gICAgICAgICAgICBcImNvbG9yOiAjZmYwMDAwOyBmb250LXdlaWdodDogYm9sZDtcIixcbiAgICAgICAgICAgIDJcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBvbkNyZWF0ZShlPzogRXZlbnQpIHtcbiAgICAgICAgY29uc3QgeyBvbkxvYWQgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIHRoaXMubG9nKFxuICAgICAgICAgICAgYG9uY3JlYXRlIHN0YXJ0ZWQuLi4gZm9yIHsgc3JjOiBcIiR7dGhpcy5zdGF0ZS5zcmN9XCIgfWAsXG4gICAgICAgICAgICBcImNvbG9yOiAjZmYwMDAwOyBmb250LXdlaWdodDogYm9sZDtcIixcbiAgICAgICAgICAgIDJcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgdGhpcy5sb2coXG4gICAgICAgICAgICAgICAgYG9uY3JlYXRlIGV2ZW50OiAke0pTT04uc3RyaW5naWZ5KGUsIG51bGwsIDIpfWAsXG4gICAgICAgICAgICAgICAgXCJjb2xvcjogI2ZmMDAwMDsgZm9udC13ZWlnaHQ6IGJvbGQ7XCIsXG4gICAgICAgICAgICAgICAgNFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvbkxvYWQpIHtcbiAgICAgICAgICAgIG9uTG9hZChlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICAgIGBvbmNyZWF0ZSBleGl0aW5nLi4uIGZvciB7IHNyYzogXCIke3RoaXMuc3RhdGUuc3JjfVwiIH1gLFxuICAgICAgICAgICAgXCJjb2xvcjogI2ZmMDAwMDsgZm9udC13ZWlnaHQ6IGJvbGQ7XCIsXG4gICAgICAgICAgICAyXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IHVwZGF0ZWQsIHJlbmRlciB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgdGhpcy5sb2coXG4gICAgICAgICAgICBgcmVuZGVyIGNhbGxlZCwgeyBzcmM6ICR7dGhpcy5zdGF0ZS5zcmN9fWAsXG4gICAgICAgICAgICBcImNvbG9yOiAjZmYwMDAwOyBmb250LXdlaWdodDogYm9sZDtcIixcbiAgICAgICAgICAgIDJcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gdXBkYXRlZCAmJiByZW5kZXIgPyByZW5kZXIgOiBudWxsO1xuICAgIH1cbn1cblxuLyoqIEB0eXBlIFNjcmlwdExvYWRlclByb3BzIFRoaXMgaXMgdGhlIHR5cGUgZGVjbGFyYXRpb24gZm9yIHByb3BzIHRoYXQgY2FuIGJlIHBhc3NlZCB0byB0aGUgU2NyaXB0TG9hZGVyIGNvbXBvbmVudCwgYGltcG9ydCB7IFNjcmlwdExvYWRlclByb3BzIH0gZnJvbSAncmVhY3Qtc2NyaXB0LWxvYWRlci0xOCdgXG4gKiBAcGFyYW0gc3JjIFRoZSBzb3VyY2Ugb2YgdGhlIHNjcmlwdCB0byBiZSBsb2FkZWQsIGUuZy4gJ2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20vcmVjYXB0Y2hhL2FwaS5qcydcbiAqIEBwYXJhbSBkZWxheU1TIEFydGlmaWNhbGx5IGFkZHMgYSBkZWxheSBpbiBtaWxsaXNlY29uZHMgYWZ0ZXIgdGhlIGNvbXBvbmVudCBtb3VudHMsIGJ1dCBiZWZvcmUgdGhlIHNjcmlwdCB0YWcgaXMgYXBwZW5kZWQgdG8gdGhlIGRvY3VtZW50LiBVc2VmdWwgZm9yIHNjcmlwdHMgdGhhdCBhcmUgbm90IG5lY2Vzc2FyeSBlYXJseSBvbiwgYW5kIG1heSBjb25mbGljdCBvbiB0aGUgYnJvd3NlcidzIHJlcXVlc3QtbGltaXQuXG4gKiBAcGFyYW0gb25DcmVhdGUgQSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCBqdXN0IHJpZ2h0IGFmdGVyIHRoZSBzY3JpcHQgdGFnIGhhcyBiZWVuIGFwcGVuZGVkIHRvIHRoZSBkb2N1bWVudC5cbiAqIEBwYXJhbSBvbkxvYWQgVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYWZ0ZXIgdGhlIHNjcmlwdCBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgbG9hZGVkLlxuICogQHBhcmFtIG9uRXJyb3IgVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgaWYgdGhlIHNjcmlwdCBmYWlscyB0byBsb2FkLlxuICogQHBhcmFtIG9uU3VjY2VzcyBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBpZiB0aGUgc2NyaXB0IGlzIGxvYWRlZCBzdWNjZXNzZnVsbHkuXG4gKiBAcGFyYW0gcmVuZGVyIFRoaXMgaXMgYW4gb3B0aW9uYWwgSlNYLkVsZW1lbnQgdGhhdCByZW5kZXJzLlxuICogQHBhcmFtIGRlYnVnIFRoaXMgaXMgYSBib29sZWFuIGZsYWcgdGhhdCBlbmFibGVzIGRlYnVnIG1vZGUuIEl0IHdpbGwgbG9nIHRvIHRoZSBjb25zb2xlIHRoZSBldmVudHMgdGhhdCBhcmUgdHJpZ2dlcmVkLlxuICogQGV4YW1wbGUgYGBcbiAqIGltcG9ydCB7IFNjcmlwdExvYWRlclByb3BzIH0gZnJvbSAncmVhY3Qtc2NyaXB0LWxvYWRlci0xOCc7XG4gKiBjb25zdCBwcm9wczogU2NyaXB0TG9hZGVyUHJvcHMgPVxuICoge1xuICogICBzcmM6ICdodHRwczovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkuanMnLFxuICogICBkZWxheU1zOiAxMDAwLCBvbkNyZWF0ZTogKCkgPT4geyBjb25zb2xlLmxvZygnU2NyaXB0IGNyZWF0ZWQhJykgfSxcbiAqICAgb25Mb2FkOiAoZTogRXZlbnQpID0+IHsgY29uc29sZS5sb2coJ1NjcmlwdCBsb2FkZWQhJykgfSxcbiAqICAgb25FcnJvcjogKGU6IEV2ZW50IHwgc3RyaW5nKSA9PiB7IGNvbnNvbGUubG9nKCdTY3JpcHQgZmFpbGVkIHRvIGxvYWQhJykgfSxcbiAqICAgb25TdWNjZXNzOiAoKSA9PiB7IGNvbnNvbGUubG9nKCdTY3JpcHQgbG9hZGVkIHN1Y2Nlc3NmdWxseSEnKSB9LFxuICogICBkZWJ1ZzogdHJ1ZSxcbiAqICAgaWQ6IEpTWC5FbGVtZW50IHRhZyBpZCxcbiAqICAgcmVuZGVyOiA8PjxzdHlsZT4ge2BoMzpob3ZlciB7dmlzaWJpbGl0eTogdmlzaWJsZTt9YH0gPC9zdHlsZT5cbiAqICA8aDMgc3R5bGU9e3t2aXNpYmlsaXR5OmhpZGRlbn19PlNjcmlwdCBsb2FkZWQhIEFNQVpPTiBMRUdBTCxcbiAqICA8YSB0YXJnZXQ9J19ibGFuaycgc3R5bGU9e3t0ZXh0RGVjb3JhdGlvbjogbm9uZX19IGhyZWY9J2h0dHBzOi8vbGl1LmFjYWRlbXkvc3Rha2Vob2xkZXIvbGV0dGVyJz5XSEVSRSBBUkUgTVkgV0FHRVNcbiAqICA8L2E+IDwvaDM+IDwvPlxuICogfVxuICogYGBcbiAqL1xuZXhwb3J0IHR5cGUgU2NyaXB0TG9hZGVyUHJvcHMgPSB7XG4gICAgZGVsYXlNcz86IG51bWJlcjtcbiAgICBpZD86IHN0cmluZztcbiAgICBvbkNyZWF0ZT86IChldmVudD86IEV2ZW50KSA9PiB2b2lkO1xuICAgIG9uRXJyb3I/OiAoXG4gICAgICAgIGV2ZW50Pzogc3RyaW5nIHwgRXZlbnQgfCBFcnJvcixcbiAgICAgICAgc291cmNlPzogc3RyaW5nLFxuICAgICAgICBsaW5lbm8/OiBudW1iZXIsXG4gICAgICAgIGNvbG5vPzogbnVtYmVyLFxuICAgICAgICBlcnJvcj86IEVycm9yXG4gICAgKSA9PiB2b2lkO1xuICAgIG9uU3VjY2Vzcz86ICgpID0+IHZvaWQ7XG4gICAgb25Mb2FkPzogKGV2ZW50PzogRXZlbnQpID0+IHZvaWQ7XG4gICAgZGVidWc/OiBib29sZWFuO1xuICAgIHJlbmRlcj86IEpTWC5FbGVtZW50O1xuICAgIHJlbmRlclNjcmlwdD86IGJvb2xlYW47XG4gICAgc3JjOiBzdHJpbmc7XG4gICAgW2tleTogc3RyaW5nXTogYW55O1xufTtcbiJdLCJuYW1lcyI6WyJyZWFjdF8xIiwiX19pbXBvcnREZWZhdWx0IiwicmVxdWlyZSIsImMiLCJiIiwiZGVmYXVsdCIsIkNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwicHJvcHMiLCJzdXBlciIsInRoaXMiLCJzdGF0ZSIsImRlbGF5TXMiLCJzcmMiLCJ0aW1lb3V0IiwicmVuZGVyIiwiaWQiLCJyZW5kZXJTY3JpcHQiLCJ1cGRhdGVkIiwiY29tcG9uZW50RGlkTW91bnQiLCJiaW5kIiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJfYXBwZW5kU2NyaXB0Iiwib25DcmVhdGUiLCJvbkxvYWQiLCJvbkVycm9yIiwib25TdWNjZXNzIiwibG9nIiwic2V0U3RhdGUiLCJzZXRUaW1lb3V0IiwibXNnIiwic3R5bGUiLCJpbmRlbnQiLCJkZWJ1ZyIsInJlcGVhdCIsImNvbnNvbGUiLCJpbmRlbnRTdHIiLCJjb21wb25lbnREaWRVcGRhdGUiLCJjbGVhclRpbWVvdXQiLCJzY3JpcHQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJlIiwiT2JqZWN0Iiwia2V5cyIsIm90aGVyUHJvcHNLZXlzIiwiZmlsdGVyIiwicHJvcCIsInNjcmlwdFByb3BLZXlzIiwiaW5jbHVkZXMiLCJzZXRBdHRyaWJ1dGUiLCJ0b1N0cmluZyIsImxlbmd0aCIsImF0dHIiLCJ2YWx1ZSIsImVudHJpZXMiLCJvbmxvYWQiLCJvbmVycm9yIiwiYm9keSIsImFwcGVuZENoaWxkIiwiSlNPTiIsInN0cmluZ2lmeSIsImN1c3RvbU9uTG9hZCIsImV4cG9ydHMiLCJTY3JpcHRUYWciXSwibWFwcGluZ3Mi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
